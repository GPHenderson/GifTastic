<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giftastic</title>

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1 min.js">
    </script>
    
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <div class= 'container-fluid'>

        <div class="row">
            <div id="btn-section" class = "col-md-12"></div>
        </div>
        <div class= "row">
            <div class= "gitImg col-md-12"></div>
        </div>
       <form class= "col-md-2">
           Add a topic 
           <input type = "text" id ="userInput"></input>
           <input type= "submit-btn" class = "btn-info" id= "submit-btn"></input>
       </form>
       <p class= "demo"></p>
       </div>

</head>
<body>

    
    <!-- var APIKey =   "j4w8TJsX0yK5oLxGN0qNmBmibsqde85U"; -->
    <script type = "text/javascript">
    $(document).ready(function(){
        var queryURL = "https://api.giphy.com/v1/gifs/trending?api_key=j4w8TJsX0yK5oLxGN0qNmBmibsqde85U";



        
        var topics = ['Basketball', 'Baseball', 'Hockey', 'Golf', 'Rugby',
               'Football', 'Soccer', 'Food', 'Exercise', 'Running',
               'Dogs', 'Cats', 'Birds', 'Lebron James', 'Michael Jordan',
               'Allen Iverson', 'Comedy', 'Mike Epps', 'Kevin Hart', 'Bearnie Mac', 
               'Martin Lawrence', 'Eddie Murphy', 'Richard Pryor', 'Movies',
               'Biking', 'Hiking', 'Skating', 'Surfing', 'Technology'];

var createBtn = function (){


    $('#btn-section').empty ();

    for (var i =0; i<topics.length; i++){
        var newBtn = $('<button value='+topics[i]+' class=btn-success>');

        newBtn.attr('data-type');

        newBtn.text(topics[i]);
        
        newBtn.attr('class', 'gif btn-success');
        $('#btn-section').append(newBtn);
        newBtn.bind ("click", function(){
            alert(this.id);
            displayGif(this.value);

            console.log (this.value)
        });

            console.log (i);
    }
}
var submit = function (){
    $('#submit-btn').on('click', function (event){
    event.preventDefault();


    var inputVal= $('#userInput').val();
    topics.push(userInputVal);
    createBtn();
    console.log (inputVal);
    console.log (topics);

    // $.ajax({
    //   url: queryURL,
    //   method: "GET"
    // }).then(function(response) {
    //   console.log(response);
    // });
     });
 }
    
var displayGif = function (obj){
console.log ("the object is: " +obj)
 var btnVal= obj;

 console.log("tttttt "+btnVal);
  
 test = queryURL + "&tag="+obj;
 $.ajax({
      url: test,
      method: "GET"
    }).then(function(response) {
      console.log(response);
    })


    .then(function(response) {

// Saving the image_original_url property
var imageUrl = response.data.image_original_url;

// Creating and storing an image tag
var giphImage = $("<img>");

// Setting the catImage src attribute to imageUrl 
giphImage.attr("src", imageUrl);
giphImage.attr("alt", "giph image");

// Prepending the catImage to the images div
$("#images").prepend(catImage);
});
}


createBtn();
submit();
$(".btn-success").on ('click', '.gif', displayGif)
    });
    </script>
</body>
</html>